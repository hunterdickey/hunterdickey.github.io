vars = "group(P1)"
) %>%
mutate(
block =
paste0(state,county,tract,block)
) %>%
select(!c(GEO_ID,state,county,tract,NAME) & !ends_with(c("NA"))) %>%
pivot_longer(
ends_with("N"),
names_to = "name",
values_to = "estimate"
) %>%
left_join(
dec_vars_2020 %>%
select(name, label)
) %>%
select(-name) %>%
separate(
label,
into = c(NA,NA,"category1","category2"),
sep = "!!"
)
smc_pop_race_2010 <-
getCensus(
name = "dec/pl",
vintage = 2010,
region = "block:*",
regionin = "state:06+county:081",
vars = "group(P1)"
) %>%
mutate(
block =
paste0(state,county,tract,block)
) %>%
select(!c(GEO_ID,state,county,tract,NAME) & !ends_with(c("NA"))) %>%
pivot_longer(
ends_with("N"),
names_to = "name",
values_to = "estimate"
) %>%
left_join(
dec_vars_2010 %>%
select(name, label)
) %>%
select(-name) %>%
separate(
label,
into = c(NA,NA,"category1","category2"),
sep = "!!"
)
dec_vars_2010 <-
listCensusMetadata(
name = "2010/dec/pl",
type = "variables"
)
dec_vars_2010
View(dec_vars_2010)
smc_pop_race_2010 <-
getCensus(
name = "dec/pl",
vintage = 2010,
region = "block:*",
regionin = "state:06+county:081",
vars = "group(P1)"
) %>%
mutate(
block =
paste0(state,county,tract,block)
) %>%
select(!c(GEO_ID,state,county,tract,NAME) & !ends_with(c("NA"))) %>%
pivot_longer(
ends_with("N"),
names_to = "name",
values_to = "estimate"
) %>%
left_join(
dec_vars_2010 %>%
select("name", "label")
) %>%
select(-"name") %>%
separate(
label,
into = c(NA,NA,"category1","category2"),
sep = "!!"
)
dec_population_2020 <-
listCensusMetadata(
name = "2020/dec/pl",
type = "variables"
)
smc_pop_2020 <-
getCensus(
name = "dec/pl",
vintage = 2020,
region = "block:*",
regionin = "state:06+county:081",
vars = "P1_001N"
) %>%
transmute(
block =
paste0(state,county,tract,block),
pop = P1_001N
)
dec_population_2010 <-
listCensusMetadata(
name = "2010/dec/pl",
type = "variables"
)
dec_population_2010 <-
listCensusMetadata(
name = "2010/dec/pl",
type = "variables"
)
smc_pop_2010 <-
getCensus(
name = "dec/pl",
vintage = 2010,
region = "block:*",
regionin = "state:06+county:081",
vars = "P001001"
) %>%
transmute(
block =
paste0(state,county,tract,block),
pop = P001001
)
smc_blocks_2020 <- blocks("CA", "San Mateo", year = 2020, progress_bar = F)
smc_blocks_2020 <- blocks("CA", "San Mateo", year = 2020, progress_bar = F)
epa_boundary <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
epa_pop_2020 <- smc_pop_2020 %>%
left_join(smc_blocks_2020 %>% select(block = GEOID20)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2020 %>% select(block = GEOID20)) %>%
st_as_sf()
mapview(epa_pop_2020, zcol = "pop")
smc_blocks_2010 <- blocks("CA", "San Mateo", year = 2010, progress_bar = F)
epa_boundary <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
epa_pop_2010 <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID20)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID20)) %>%
st_as_sf()
epa_boundary <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
mapview(epa_pop_2010, zcol = "pop")
epa_pop_2010 <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary) + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, col = "red") + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, color = "red") + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, color = "red") + mapview(epa_pop_2020, zcol = "pop")
mapview(epa_boundary, color = "pink") + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, color = "dark red") + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, color = "black
") + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, color = "black") + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, color = "orange") + mapview(epa_pop_2010, zcol = "pop")
mapview(epa_boundary, color = "red") + mapview(epa_pop_2010, zcol = "pop")
View(epa_pop_2010)
# Spacial Subsetting
sum(epa_pop_2010$pop)
sum(epa_pop_2020$pop)
mapview(epa_boundary, color = "red") + mapview(epa_pop_2010, zcol = "pop")
View(smc_blocks_2020)
epa_boundary_2010 <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
epa_boundary_2020 <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
smc_epa_block <- smc_blocks_2020[epa_boundary_2010, ]
smc_epa_block <- smc_blocks_2020[epa_boundaries, ]
epa_boundaries <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
smc_epa_block <- smc_blocks_2020[epa_boundaries, ]
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = epa_pop_2020,
stroke = F,
fillOpacity = 0.5
) %>%
addPolygons(
data = epa_pop_2010,
color = "red",
weight = 0.75,
fill = F
)
epa_tot_pop_2010 <- mapview(epa_boundary, color = "red") + mapview(epa_pop_2010, zcol = "pop")
epa_tot_pop_2020 <- mapview(epa_boundary, color = "red") + mapview(epa_pop_2020, zcol = "pop")
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = epa_tot_pop_2020,
stroke = F,
fillOpacity = 0.5
) %>%
addPolygons(
data = epa_tot_pop_2020,
color = "red",
weight = 0.75,
fill = F
)
epa_tot_pop_2010 <- mapview(epa_boundary_2010, color = "red") + mapview(epa_pop_2010, zcol = "pop") + mapview(epa_pop_2020, zcol = "pop")
epa_tot_pop_2010 <- mapview(epa_boundary_2010, color = "red") + mapview(epa_pop_2010, zcol = "pop") + mapview(epa_pop_2020, zcol = "pop")
epa_tot_pop_2010
epa_tot_pop_2010 <- mapview(epa_boundary_2010, color = "red") + mapview(epa_pop_2010, zcol = "pop") + mapview(epa_pop_2020, zcol = "pop", color = "red")
epa_tot_pop_2010
epa_tot_pop_2010 <- mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop") + mapview(epa_pop_2020, zcol = "pop", color = "red")
epa_tot_pop_2010
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop") + mapview(epa_pop_2020, zcol = "pop", color = "red")
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop", color = "blue") + mapview(epa_pop_2020, zcol = "pop", color = "red")
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = epa_pop_2020,
stroke = F,
fillOpacity = 0.5
) %>%
addPolygons(
data = epa_pop_2010,
color = "red",
weight = 0.75,
fill = F
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = smc_pdas,
stroke = F,
fillOpacity = 0.5
) %>%
addPolygons(
data = smc_pdas_blocks,
color = "red",
weight = 0.75,
fill = F
)
epa_pop_difference_map <-  epa_pop_2020 - epa_pop_2010
epa_pop_2010$pop[1]-epa_pop_2020$pop[1]
epa_pop_2010[epa_pop_2010$pop[1]-epa_pop_2020$pop[1]]
epa_pop_2010(epa_pop_2010$pop[1]-epa_pop_2020$pop[1])
for (i in length(epa_pop_2010)) {
epa_pop_difference_map[i] <- c(epa_pop_2010$pop[i]-epa_pop_2020$pop[i], na.rm = T)
}
epa_pop_difference_map <- NULL
for (i in length(epa_pop_2010)) {
epa_pop_difference_map[i] <- c(epa_pop_2010$pop[i]-epa_pop_2020$pop[i], na.rm = T)
}
for (i in length(epa_pop_2010)) {
epa_pop_difference_map[i] <- epa_pop_2010$pop[i]-epa_pop_2020$pop[i]
}
epa_pop_difference_map <- NULL
for (i in length(epa_pop_2010)) {
epa_pop_difference_map[i] <- epa_pop_2010$pop[i]-epa_pop_2020$pop[i]
}
for (i in nrow(epa_pop_2010)) {
epa_pop_difference_map[i] <- epa_pop_2010$pop[i]-epa_pop_2020$pop[i]
}
for (i in nrow(epa_pop_2010)) {
epa_pop_difference_map[i] <- epa_pop_2010$pop[i]
}
View(epa_pop_2020)
nrow(epa_pop_2010)
c(epa_pop_2010$pop - epa_pop_2010$pop, na.rm=T)
epa_pop_2010$pop - epa_pop_2010$pop
epa_pop_2010$pop - epa_pop_2020$pop
epa_pop_difference <- data.frame(epa_pop_2020, epa_pop_2020$pop - epa_pop_2010$pop, stringsAsFactors=FALSE)
epa_pop_difference <- data.frame(epa_pop_2020, epa_pop_2020$pop - epa_pop_2010$pop, na.rm=T, stringsAsFactors=FALSE)
epa_pop_difference <- data.frame(epa_pop_2020, epa_pop_2020$pop - epa_pop_2010$pop, na.rm= T, stringsAsFactors=FALSE)
epa_pop_difference <- data.frame(epa_pop_2020, epa_pop_2020$pop - epa_pop_2010$pop, na.rm= T, )
epa_pop_2020$epa_pop_difference <- epa_pop_2020$pop - epa_pop_2010$pop
epa_pop_2020$epa_pop_difference <- c(epa_pop_2020$pop - epa_pop_2010$pop, na.rm = T)
epa_pop_difference <- epa_pop_2020$pop - epa_pop_2010$pop
epa_pop_2010$epa_pop_difference <- epa_pop_2020$pop - epa_pop_2010$pop
View(epa_pop_2010)
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop", color = "blue") + mapview(epa_pop_2020, zcol = "pop", color = "red")
epa_pop_2010$pop_difference_1020 <- epa_pop_2020$pop - epa_pop_2010$pop
epa_pop_difference <- data.frame(epa_pop_2010)
View(epa_pop_difference)
epa_pop_2010$pop_difference_1020 <- epa_pop_2020$pop - epa_pop_2010$pop
epa_pop_difference <- data.frame(epa_pop_2010)
View(epa_pop_difference)
epa_pop_difference$pop = NULL
epa_pop_difference <- data.frame(epa_pop_2010)
epa_pop_difference$pop = epa_pop_difference$epa_pop_difference
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop", color = "blue") + mapview(epa_pop_2020, zcol = "pop", color = "red") + mapview(epa_pop_difference, zcol = "pop")
View(epa_pop_2010)
epa_pop_difference_2 <-
epa_pop_difference %>%
st_centroid() %>%
.[smc_pdas, ] %>%
st_set_geometry(NULL) %>%
left_join(epa_pop_difference %>% select(block)) %>%
st_as_sf()
epa_pop_difference  <- epa_pop_2010 %>%
left_join(epa_boundary_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary_2010, ] %>%
st_set_geometry(NULL) %>%
left_join(epa_boundary_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
View(smc_blocks_2010)
epa_boundary_2010 <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
epa_pop_difference <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_pop_2010$pop_difference_1020 <- epa_pop_2020$pop - epa_pop_2010$pop
View(epa_pop_difference)
View(epa_pop_2010)
View(epa_pop_difference)
epa_pop_difference$pop = epa_pop_2010$pop_difference_1020
View(epa_pop_difference)
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop", color = "blue") + mapview(epa_pop_2020, zcol = "pop", color = "red") + mapview(epa_pop_difference, zcol = "pop")
mapview(epa_pop_difference, zcol = "pop")
sum(epa_pop_difference$pop)
total(epa_pop_difference$pop)
sum(epa_pop_difference$pop)
5078/1689.6
epa_per_acre_pop_increase <- 5078/1689.6
epa_per_acre_pop_increase
mapview(epa_pop_difference, zcol = "pop")
epa_pop_dif_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
View(epa_pop_dif_acre)
sum(epa_pop_difference$pop)
epa_per_acre_pop_increase$pop/1689.6
epa_per_acre_pop_increase$acre <- epa_per_acre_pop_increase$popepa_per_acre_pop_increase$pop/1689.6
epa_per_acre_pop_increase$acre <- epa_per_acre_pop_increase$pop/1689.6
epa_pop_dif_acre$acre <- epa_pop_dif_acre$pop/1689.6
epa_pop_dif_acre$acre = NULL
epa_pop_dif_acre$pop <- epa_pop_difference$pop
epa_pop_dif_acre$acre <- epa_pop_dif_acre$pop/1689.6
epa_pop_dif_acre$pop <- epa_pop_difference$acre
epa_pop_dif_acre$pop <- epa_pop_difference$pop
epa_pop_dif_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_pop_dif_acre$pop <- epa_pop_difference$pop
epa_pop_dif_acre$pop/1689.6
epa_pop_dif_acre$pop <- epa_pop_dif_acre$pop/1689.6
sum(epa_pop_2010$pop)
sum(epa_pop_difference$pop)
mapview(epa_pop_dif_acre, zcol = "pop")
epa_pop_dif_per_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_pop_dif_per_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_pop_dif_per_acre
epa_pop_dif_per_acre
sum(epa_pop_difference$pop)
epa_pop_dif_per_acre$pop <- epa_pop_difference$pop
epa_pop_dif_per_acre$pop <- epa_pop_dif_per_acre$pop/1689.6
epa_pop_dif_per_acre
mapview(epa_pop_dif_per_acre, zcol = "pop")
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop", color = "blue") + mapview(epa_pop_2020, zcol = "pop", color = "red") + mapview(epa_pop_difference, zcol = "pop") + mapview(epa_pop_dif_per_acre, zcol = "pop")
epa_abs_dif_people_per_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop", color = "blue") + mapview(epa_pop_2020, zcol = "pop", color = "red") + mapview(epa_pop_difference, zcol = "pop") + mapview(epa_abs_dif_people_per_acre, zcol = "pop")
epa_abs_dif_people_per_acre$pop <- epa_pop_difference$pop
epa_abs_dif_people_per_acre$pop <- epa_abs_dif_people_per_acre$pop/1689.6
epa_abs_dif_people_per_acre
epa_abs_dif_people_per_acre
mapview(epa_abs_dif_people_per_acre, zcol = "pop")
mapview(epa_abs_dif_people_per_acre, zcol = "pop")
mapview(epa_abs_dif_people_per_acre, zcol = "pop")
mapview(epa_abs_dif_people_per_acre, zcol = "pop")
epa_abs_dif_people_per_acre
View(epa_abs_dif_people_per_acre)
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2010, zcol = "pop", color = "blue") + mapview(epa_pop_2020, zcol = "pop", color = "red") + mapview(epa_pop_difference, zcol = "pop") + mapview(epa_abs_dif_people_per_acre, zcol = "pop")
mapview(epa_pop_difference, zcol = "pop") + mapview(epa_abs_dif_people_per_acre, zcol = "pop")
install.packages("devtools")
install.packages("devtools")
epa_tot_pop_2010 <- mapview(epa_boundary_2010, color = "red") + mapview(epa_pop_2010, zcol = "pop")
epa_tot_pop_2010 <- mapview(epa_boundary_2010, color = "red") + mapview(epa_pop_2010, zcol = "pop")
smc_blocks_2010 <- blocks("CA", "San Mateo", year = 2010, progress_bar = F)
smc_blocks_2010 <- blocks("CA", "San Mateo", year = 2010, progress_bar = F)
epa_boundary_2010 <- places("CA", progress_bar = F) %>%
filter(NAME == "East Palo Alto")
epa_pop_difference <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary_2010, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_pop_2010$pop_difference_1020 <- epa_pop_2020$pop - epa_pop_2010$pop
epa_pop_difference <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary_2010, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_pop_2010$pop_difference_1020 <- epa_pop_2020$pop - epa_pop_2010$pop
epa_pop_difference$pop = epa_pop_2010$pop_difference_1020
mapview(epa_pop_difference, zcol = "pop")
epa_abs_dif_people_per_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary_2010, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_abs_dif_people_per_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary_2010, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_abs_dif_people_per_acre
sum(epa_pop_difference$pop)
epa_abs_dif_people_per_acre$pop <- epa_pop_difference$pop
epa_abs_dif_people_per_acre$pop <- epa_pop_difference$pop
epa_abs_dif_people_per_acre$pop <- epa_abs_dif_people_per_acre$pop/1689.6
epa_abs_dif_people_per_acre
mapview(epa_abs_dif_people_per_acre, zcol = "pop")
mapview(epa_pop_difference, zcol = "pop") + mapview(epa_abs_dif_people_per_acre, zcol = "pop")
View(epa_pop_2010)
epa_tot_pop_2020 <- mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2020, zcol = "pop")
epa_tot_pop_2020 <- mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2020, zcol = "pop")
epa_tot_pop_2020 <- mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2020, zcol = "pop")
epa_tot_pop_2010 <- mapview(epa_boundary_2010, color = "red") + mapview(epa_pop_2010, zcol = "pop")
epa_tot_pop_2010
epa_tot_pop_2020 <- mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2020, zcol = "pop")
epa_tot_pop_2020
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2020, zcol = "pop") + mapview(epa_pop_2010, zcol = "pop", color = "blue")
mapview(epa_boundary_2020, color = "red")
mapview(epa_pop_difference, zcol = "pop") mapview(epa_pop_2020, zcol = "pop") + mapview(epa_pop_2010, zcol = "pop", color = "blue")
mapview(epa_pop_difference, zcol = "pop") + mapview(epa_pop_2020, zcol = "pop") + mapview(epa_pop_2010, zcol = "pop", color = "blue")
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2020, zcol = "pop", fill = F)
mapview(epa_boundary_2020, color = "red") + mapview(epa_pop_2020, zcol = "pop", fill = F) + mapview(epa_pop_2010, zcol = "pop", fill = F)
mapview(epa_boundary_2010, color = "red") + mapview(epa_pop_difference, zcol = "pop") + mapview(epa_abs_dif_people_per_acre, zcol = "pop")
epa_pop_2010$pop_difference_1020 <- epa_pop_2010$pop - epa_pop_2020$pop
epa_pop_difference$pop = epa_pop_2010$pop_difference_1020
epa_abs_dif_people_per_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary_2010, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_abs_dif_people_per_acre <- smc_pop_2010 %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf() %>%
st_centroid() %>%
.[epa_boundary_2010, ] %>%
st_set_geometry(NULL) %>%
left_join(smc_blocks_2010 %>% select(block = GEOID10)) %>%
st_as_sf()
epa_abs_dif_people_per_acre
sum(epa_pop_difference$pop)
epa_abs_dif_people_per_acre$pop <- epa_pop_difference$pop
epa_abs_dif_people_per_acre$pop <- epa_abs_dif_people_per_acre$pop/1689.6
epa_abs_dif_people_per_acre
mapview(epa_pop_difference, zcol = "pop") + mapview(epa_pop_2020, zcol = "pop") + mapview(epa_pop_2010, zcol = "pop", color = "blue")
mapview(epa_pop_difference, zcol = "pop") + mapview(epa_abs_dif_people_per_acre, zcol = "pop")
